<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			.wrap{
				width: 500px;
				height: 400px;
				border: 1px solid black;
				position: relative;
			}
			.wrap div{
				width: 50px;
				height: 50px;
				background-color: gray;
				position: absolute;
			}
			.snake{
				left: 0;
				top: 0;
			}
			.food{
				left: 300px;
				top: 200px;
			}
		</style>
	</head>
	<body>
		<div class="wrap">
			<div class="food"></div>
			<div class="snake"></div>	
		</div>
		<script type="text/javascript">
			var snake = document.querySelector(".snake");
			var food = document.querySelector(".food");
			snake.onmousedown = function(ev){
				var evObj = ev || event
				var x1 = evObj.clientX;
				var y1 = evObj.clientY;
				var l = snake.offsetLeft;
				var t = snake.offsetTop;
				document.onmousemove = function(ev){
					var eve = ev || event;
					var x2 = eve.clientX
					var y2 = eve.clientY;
					var chaX = x2 - x1;
					var chaY = y2 - y1;
					snake.style.left = l + chaX + "px";
					snake.style.top = t + chaY + "px";
					//碰撞检测
					var sL = snake.offsetLeft;
					var sT = snake.offsetTop;
					var sW = snake.offsetWidth;
					var sH = snake.offsetHeight;
					var fL = food.offsetLeft;
					var fT = food.offsetTop;
					var fW = food.offsetWidth;
					var fH = food.offsetHeight;
					var bolLeft = sL + sW < fL;
					var bolRight = sL > fL + fW;
					var bolTop = sT + sH < fT;
					var bolBottom = fT + fH < sT;
					if(bolBottom || bolTop || bolRight || bolLeft){
						food.style.backgroundColor = "";
					}else{
						food.style.backgroundColor = "red";
					}					
				}
				snake.onmouseup = function(){
					document.onmousemove = "";
				}
			}
			
			
			
			
			
			
		</script>
	</body>
</html>
