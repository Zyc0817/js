<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			#outer {
				background: url(img/game_bg.jpg) no-repeat;
				width: 320px;
				height: 480px;
				position: relative;
				margin: 0 auto;
			}
			
			#scoring {
				position: absolute;
				font-weight: bold;
				font-size: 20px;
				color: white;
				left: 65px;
				top: 13px;
			}
			
			#countDown {
				position: relative;
				background: url(img/progress.png) no-repeat;
				width: 180px;
				height: 16px;
				left: 63px;
				top: 66px;
			}
			
			#wolfs img {
				position: absolute;
			}
			
			#menu {
				position: absolute;
				width: 320px;
				text-align: center;
				top: 200px;
				left: 0;
			}
			
			#start {
				line-height: 50px;
				font-size: 30px;
				font-weight: bold;
				color: green;
				text-shadow: 0 0 5px red;
				display: block;
				text-decoration: none;
			}
		</style>
	</head>

	<body>
		<div id="outer">
			<!--ÂàÜÊï∞-->
			<div id="scoring">0</div>
			<!--ÂÄíËÆ°Êó∂-->
			<div id="countDown"></div>
			<!--üê∫s‰ª¨-->
			<div id="wolfs">

			</div>
			<div id="menu">
				<a href="###" id="start">ÂºÄÂßã</a>
			</div>
		</div>

		<script type="text/javascript">
			//ÈöèÊú∫ÂáΩÊï∞ÔºàÂùëÔºåüê∫ÁöÑÁßçÁ±ªÔºâ
			function rand(min, max) {
				return parseInt(Math.random() * (max - min + 1) + min);
			}
			//ÂàÜÊï∞
			var scoring = document.getElementById("scoring");
			//ÂÄíËÆ°Êó∂
			var countDown = document.getElementById("countDown");
			//üê∫Á™ù
			var wolfs = document.getElementById("wolfs");
			var menu = document.getElementById("menu");
			var start = document.getElementById("start");
			var arrPos = [{
				l: "98px",
				t: "115px"
			}, {
				l: "17px",
				t: "160px"
			}, {
				l: "15px",
				t: "220px"
			}, {
				l: "30px",
				t: "293px"
			}, {
				l: "122px",
				t: "273px"
			}, {
				l: "207px",
				t: "295px"
			}, {
				l: "200px",
				t: "211px"
			}, {
				l: "187px",
				t: "141px"
			}, {
				l: "100px",
				t: "185px"
			}];
			//ËÆ°ÂàÜÂáΩÊï∞
			function scoringFn(obj){
				var scoringNum = parseInt(scoring.innerHTML);
				if(obj.type == "h"){
					scoring.innerHTML = scoringNum + 10;
				}else{
					scoring.innerHTML = scoringNum - 10;
				}		
			}
			//ÂÄíËÆ°Êó∂
			var countDownTimer = null;
			var countDownWidth = countDown.offsetWidth;
			var countDownBol = false;
			countDownTimer = setInterval(function(){
				if(countDownBol){
					countDownWidth--;
					if(countDownWidth <= 0){
						clearInterval(createWolfsTimer);
						clearInterval(countDownTimer);
						var score = scoring.innerHTML;
						alert("Ê∏∏ÊàèÁªìÊùüÔºå‰Ω†Ëé∑Âæó‰∫Ü" + score + "ÂàÜ");
						window.location.reload();
					}
					countDown.style.width = countDownWidth + "px";
				}
			},150);
			
			
			var createWolfsTimer = null;
			start.onclick = function(){
				countDownBol = true;
				menu.style.display = "none";
				createWolfsTimer = setInterval(function(){
					//ÂàõÂª∫üê∫
					var wolf = new Image();
					//üê∫ÁöÑÁ±ªÂûã
					wolf.type = rand(0,100) < 80 ? "h" : "x";
					wolf.index = 0;
					wolf.src = "img/" + wolf.type + wolf.index + ".png";
					//ÊâæÂùë
					//ÊâæÂà∞ÁãºÁ™ùÈáåÁöÑÊâÄÊúâimgÊ†áÁ≠æ
					var childs = wolfs.children;
					//‰∏ãÈù¢ÁöÑ‰∏§‰∏™‰∏úË•øÊòØÂæ™ÁéØÂÜÖ‰ΩøÁî®ÁöÑ
					var bol = true;
					var r = 0;  //Ë£ÖÊàë‰ª¨ÊâæÂà∞ÁöÑÊ≤°ÊúâÁãºÁöÑÂùëÁöÑÂùêÊ†á
					while(bol){
						r = rand(0,arrPos.length - 1);
						for(var i = 0;i < childs.length;i++){
							if(childs[i].offsetLeft == parseInt(arrPos[r].l)){
								break;
							}
						}
						if(i == childs.length){
							bol = false;
						}				
					}
					//‰∫§Âá∫Âæ™ÁéØÂêéÁöÑÂùêÊ†á
					wolf.style.left = arrPos[r].l;
					wolf.style.top = arrPos[r].t;
					wolfs.appendChild(wolf);
					//ÁãºÂêë‰∏äÁöÑÂä®Áîª
					wolf.timer = setInterval(function(){
						wolf.index++;
						if(wolf.index > 4){
							clearInterval(wolf.timer);
							wolf.downFn();
						}
						wolf.src = "img/" + wolf.type + wolf.index + ".png";
					},150);
					wolf.downFn = function(){
						wolf.downTimer = setInterval(function(){
							wolf.index--;
							if(wolf.index <= 0){
								clearInterval(wolf.downTimer);
								//ËÆ©üê∫ÊªöËõã
								wolfs.removeChild(wolf);
							}
							wolf.src = "img/" + wolf.type + wolf.index + ".png";
						},150);
					}
					wolf.wolfClick = true;
					wolf.onclick = function(){
						if(wolf.wolfClick == false){
							return;
						}
						wolf.wolfClick = false;
						scoringFn(wolf);
						wolf.index = 5;
						//Âπ≤Êéâ‰∏§‰∏™Âá∫üê∫ÁöÑÂä®Áîª
						clearInterval(wolf.timer);
						clearInterval(wolf.downTimer)
						wolf.clickTimer = setInterval(function(){
							wolf.index++;
							if(wolf.index > 8){
								clearInterval(wolf.clickTimer);
								wolfs.removeChild(wolf);
							}
							wolf.src = "img/" + wolf.type + wolf.index + ".png";
						},150);
						
					}
					
					
					
				},800);
			}
			
			
			
			
			
			
			
			
			
		</script>
	</body>

</html>